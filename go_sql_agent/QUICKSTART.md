# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## –î–ª—è PostgreSQL

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
docker-compose up -d postgres

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
copy .env.postgres .env

# 3. –î–æ–±–∞–≤–∏—Ç—å –≤–∞—à API –∫–ª—é—á –≤ .env
# –û—Ç–∫—Ä–æ–π—Ç–µ .env –∏ –∑–∞–º–µ–Ω–∏—Ç–µ "your_api_key_here" –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á

# 4. –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
go build -o go_sql_agent.exe .\cmd\main.go
.\go_sql_agent.exe
```

## –î–ª—è MySQL

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
docker-compose up -d mysql

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
copy .env.mysql .env

# 3. –î–æ–±–∞–≤–∏—Ç—å –≤–∞—à API –∫–ª—é—á –≤ .env
# –û—Ç–∫—Ä–æ–π—Ç–µ .env –∏ –∑–∞–º–µ–Ω–∏—Ç–µ "your_api_key_here" –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á

# 4. –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
go build -o go_sql_agent.exe .\cmd\main.go
.\go_sql_agent.exe
```

## –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Make (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# PostgreSQL
make setup-pg
# –ó–∞—Ç–µ–º –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á
make run

# MySQL
make setup-mysql
# –ó–∞—Ç–µ–º –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á
make run
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### PostgreSQL
```bash
docker exec -it medical_db_postgres psql -U meduser -d medical_db -c "SELECT COUNT(*) FROM patients;"
```

### MySQL
```bash
docker exec -it medical_db_mysql mysql -u meduser -pmedpass123 medical_db -e "SELECT COUNT(*) FROM patients;"
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–æ—è–≤—è—Ç—Å—è 3 CSV —Ñ–∞–π–ª–∞:
- `diagnoses.csv` - –¥–∏–∞–≥–Ω–æ–∑—ã –ú–ö–ë-10
- `patients.csv` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ü–∏–µ–Ω—Ç–∞—Ö
- `receips.csv` - –≤—ã–ø–∏—Å–∞–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã

## –û—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è)
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
docker-compose down -v
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "connection refused"
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –µ—â–µ –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10-15 —Å–µ–∫—É–Ω–¥ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.

### "QWEN_API_KEY is required"
–í—ã –∑–∞–±—ã–ª–∏ —É–∫–∞–∑–∞—Ç—å API –∫–ª—é—á –≤ —Ñ–∞–π–ª–µ `.env`.

### –ü–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç
–ï—Å–ª–∏ –ø–æ—Ä—Ç 5432 (Postgres) –∏–ª–∏ 3306 (MySQL) —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `docker-compose.yml`:
```yaml
ports:
  - "5433:5432"  # –¥–ª—è Postgres
  # –∏–ª–∏
  - "3307:3306"  # –¥–ª—è MySQL
```

–ò –æ–±–Ω–æ–≤–∏—Ç–µ `DB_PORT` –≤ `.env` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.
